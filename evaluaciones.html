<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluación</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- Si tu favicon está en una carpeta, ajusta la ruta -->
    <!-- <link rel="icon" href="images/favicon.ico" type="image/x-icon"> -->
   
    <style>
        /* Estilos generales */
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #3c3e50, #3c3e50, #3c3e50);
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        h1, h2 {
            font-size: 2em;
            color: #00d4ff;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
        }
        /* Centrado del logo */
        .logo {
            max-width: 150px;
            margin-bottom: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
         }
        input, button {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: none;
            font-size: 1em;
        }
        button {
            background-color: #00d4ff;
            color: #0f0c29;
            cursor: pointer;
        }
        button:hover {
            background-color: #007a99;
        }
        #quiz-container, #result-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
            max-width: 500px;
            width: 90%;
            text-align: center;
            display: none;
        }
        .question {
            text-align: left;
            margin: 10px 0;
        }
        .answers button {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            font-size: 1.2em;
            background-color: #1a1a1a;
            color: #00d4ff;
            border: 2px solid #00d4ff;
            border-radius: 8px;
            cursor: pointer;
        }
        .answers button:hover {
            background-color: #00d4ff;
            color: #1a1a1a;
        }
        #loading {
            display: none;
            font-size: 1.5em;
            color: #00d4ff;
        }
        #login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>
    <!-- Contenedor de Bienvenida -->
    <div id="welcome-container" style="display: none;">
        <img src="https://firebasestorage.googleapis.com/v0/b/rrhh-ee7e3.appspot.com/o/RETOM%20COMPLETO%20(2).png?alt=media&token=2e334ae1-57f3-4d8f-a8fd-b410e54f1236" alt="Logo de la empresa" class="logo">
        <h1>Bienvenid@, <span id="user-name"></span>!</h1>
        <button id="start-quiz" style="display: none;">Iniciar Evaluación</button>
    </div>

    <!-- Sesión de Inicio de Sesión -->
    <div id="login-container">
        <h1>Iniciar Sesión</h1>
        <form id="loginForm" style="display: flex; flex-direction: column; align-items: center;">
            <input type="email" id="email" placeholder="Correo electrónico" required style="margin-bottom: 10px; width: 80%;"><br>
            <input type="text" id="token" placeholder="Token de acceso" required style="margin-bottom: 10px; width: 80%;"><br>
            <button type="submit" style="width: 80%;">Iniciar Sesión</button>
        </form>
    </div>

    <!-- Sesión de Evaluación -->
    <div id="quiz-container">
        <h2>Evaluación</h2>
        <div id="question" class="question"></div>
        <div id="answers" class="answers"></div>
    </div>

    <!-- Resultados -->
    <div id="result-container">
        <h2>Felicidades</h2>
        <p id="result-message"></p>
        <button id="ok-button">OK</button>
    </div>

    <!-- Loading Spinner -->
    <div id="loading">Cargando...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, query, where, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCFfkmEDjqAwJNtnKByRQNt9NUQs5UdNa0",
            authDomain: "rrhh-ee7e3.firebaseapp.com",
            projectId: "rrhh-ee7e3",
            storageBucket: "rrhh-ee7e3.appspot.com",
            messagingSenderId: "605891607617",
            appId: "1:605891607617:web:daedbd7b7b7b5a8b901ac0",
            measurementId: "G-Q801R9M95S"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.getElementById("loginForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const tokenInput = document.getElementById("token").value;

            try {
                const usersQuery = query(collection(db, "users"), where("email", "==", email));
                const usersSnapshot = await getDocs(usersQuery);

                if (usersSnapshot.empty) {
                    alert("Usuario no registrado.");
                    return;
                }

                const tokensQuery = query(collection(db, "tokens"), where("token", "==", tokenInput));
                const tokensSnapshot = await getDocs(tokensQuery);

                if (tokensSnapshot.empty) {
                    alert("Token incorrecto o expirado.");
                } else {
                    const user = usersSnapshot.docs[0].data();
                    document.getElementById("login-container").style.display = "none";
                    document.getElementById("welcome-container").style.display = "block";
                    document.getElementById("start-quiz").style.display = "block";
                    document.getElementById("user-name").textContent = user.username;
                    sessionStorage.setItem("token", tokenInput);
                    sessionStorage.setItem("userName", user.username);
                }
            } catch (error) {
                alert("Error al iniciar sesión: " + error.message);
            }
        });

       let questions = [
    { question: "¿Cómo defines la ética en el trabajo?", answers: ["Cumplir con la ley", "Ser honesto y justo", "Seguir órdenes", "Evitar conflictos"], correctAnswer: 1 },
    { question: "¿Qué harías si tienes un conflicto con un colega?", answers: ["Conversar con él", "Ignorarlo", "Reportarlo a un superior", "Pedir ayuda a otros colegas"], correctAnswer: 0 },
    { question: "¿Qué haces si un proyecto no se desarrolla como esperabas?", answers: ["Analizo y ajusto el plan", "Abandono el proyecto", "Dejo que otros se encarguen", "Me frustro y sigo igual"], correctAnswer: 0 },
    { question: "¿Qué harías si no te sientes valorado en el trabajo?", answers: ["Hablar con mi jefe", "Buscar otro trabajo", "Ignorar la situación", "Trabajar más duro"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti el trabajo en equipo?", answers: ["Muy importante", "Poco importante", "Moderadamente importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si te sientes abrumado por tus responsabilidades?", answers: ["Priorizar tareas", "Ignorar la carga", "Pedir ayuda", "Renunciar"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti el equilibrio entre trabajo y vida personal?", answers: ["Muy importante", "Poco importante", "Moderadamente importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo manejas las críticas constructivas?", answers: ["Aprendo de ellas", "Las ignoro", "Me pongo a la defensiva", "Las rechazo"], correctAnswer: 0 },
    { question: "¿Qué haces si un cliente no está satisfecho con tu trabajo?", answers: ["Le ofrezco una solución", "Ignoro el problema", "Lo reporto", "Evito la responsabilidad"], correctAnswer: 0 },
    { question: "¿Qué tan cómodo te sientes con los cambios en tu entorno laboral?", answers: ["Muy cómodo", "Algo incómodo", "Muy incómodo", "Neutral"], correctAnswer: 0 },
    { question: "¿Qué harías si tienes un problema personal que interfiere con tu desempeño?", answers: ["Busco ayuda profesional", "Lo ignoro", "Me tomo un descanso", "Lo comunico a mi jefe"], correctAnswer: 3 },
    { question: "¿Qué tan importante es para ti la honestidad en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si tienes una carga de trabajo que parece inabordable?", answers: ["Organizo mis tareas", "Pido ayuda", "Me esfuerzo más", "Ignoro otras tareas"], correctAnswer: 0 },
    { question: "¿Qué harías si alguien toma crédito por tu trabajo?", answers: ["Lo aclaro con respeto", "Me frustro pero lo ignoro", "Lo informo a mi jefe", "Lo dejo pasar"], correctAnswer: 0 },
    { question: "¿Qué significa para ti el éxito en tu vida profesional?", answers: ["Lograr mis objetivos", "Ganar dinero", "Ser reconocido", "Tener estabilidad"], correctAnswer: 0 },
    { question: "¿Qué tan importante es mantener un equilibrio entre trabajo y vida personal?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo enfrentas una situación de acoso en el trabajo?", answers: ["Lo reporto", "Lo ignoro", "Busco apoyo de otros colegas", "Lo enfrento solo"], correctAnswer: 0 },
    { question: "¿Qué opinas sobre la transparencia en el lugar de trabajo?", answers: ["Es fundamental", "Es moderadamente importante", "No es necesaria", "Depende de la situación"], correctAnswer: 0 },
    { question: "¿Qué haces si tienes que trabajar con alguien con quien no te llevas bien?", answers: ["Me adapto y colaboro", "Evito a la persona", "Hablo con mi jefe", "Hago mi trabajo sin colaborar"], correctAnswer: 0 },
    { question: "¿Cómo defines la responsabilidad en el trabajo?", answers: ["Cumplir con mis tareas", "Evitar errores", "Apoyar a otros", "Ser líder"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas cuando alguien critica tu trabajo?", answers: ["Escucho y aprendo", "Me defiendo", "Ignoro la crítica", "Me siento afectado"], correctAnswer: 0 },
    { question: "¿Qué harías si te sientes estancado en tu trabajo actual?", answers: ["Busco oportunidades de crecimiento", "Me resigno", "Cambio de trabajo", "Me quejo con otros"], correctAnswer: 0 },
    { question: "¿Qué prefieres en el trabajo: estabilidad o nuevos retos?", answers: ["Nuevos retos", "Estabilidad", "Ambos", "Ninguno"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti la creatividad en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué opinas de la competencia en el lugar de trabajo?", answers: ["Motivadora", "Desmotivadora", "Neutral", "Negativa"], correctAnswer: 0 },
    { question: "¿Qué haces si tienes una idea que podría mejorar el proceso de trabajo?", answers: ["La comparto", "La guardo para mí", "La implemento solo", "La desestimo"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti un ambiente laboral positivo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si alguien en el equipo no cumple con su parte del trabajo?", answers: ["Lo converso con la persona", "Hablo con el jefe", "Ignoro la situación", "Asumo su trabajo"], correctAnswer: 0 },
    { question: "¿Cómo manejas la presión en el trabajo?", answers: ["Mantengo la calma y priorizo", "Me estreso", "Delego", "Ignoro la presión"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas si un colega se atribuye tu trabajo?", answers: ["Converso con él", "Lo ignoro", "Lo informo a un superior", "Me frustro"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la comunicación en el equipo para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si encuentras un error en el trabajo de un colega?", answers: ["Se lo menciono", "Lo ignoro", "Hablo con el jefe", "Corrijo el error"], correctAnswer: 0 },
    { question: "¿Qué tan cómodo te sientes dando retroalimentación?", answers: ["Muy cómodo", "Algo incómodo", "Muy incómodo", "Neutral"], correctAnswer: 0 },
    { question: "¿Cómo definirías la ética profesional?", answers: ["Hacer lo correcto", "Cumplir reglas", "Buscar resultados", "Seguir órdenes"], correctAnswer: 0 },
    { question: "¿Qué haces si un compañero rompe las normas de la empresa?", answers: ["Lo informo", "Lo ignoro", "Hablo con él", "Apoyo su decisión"], correctAnswer: 0 },
    { question: "¿Cómo defines un buen liderazgo?", answers: ["Inspirar y guiar", "Ser estricto", "Tener autoridad", "Evitar conflictos"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti el desarrollo personal en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si tienes una tarea difícil?", answers: ["Busco apoyo", "Me esfuerzo solo", "Evito la tarea", "La delego"], correctAnswer: 0 },
    { question: "¿Qué prefieres: reconocimiento público o personal?", answers: ["Público", "Personal", "Ambos", "Ninguno"], correctAnswer: 1 },
    { question: "¿Qué significa para ti la responsabilidad en el trabajo?", answers: ["Cumplir con mis tareas", "Evitar errores", "Apoyar a otros", "Ser líder"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas cuando un cliente no está satisfecho con tu trabajo?", answers: ["Intento solucionarlo", "Ignoro el problema", "Informo a mi jefe", "Evito responsabilidad"], correctAnswer: 0 },
    { question: "¿Qué opinas sobre la importancia del trabajo en equipo?", answers: ["Es fundamental", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo manejas la frustración en el trabajo?", answers: ["Canalizo la energía", "Ignoro la frustración", "Me desmotivo", "Busco apoyo"], correctAnswer: 0 },
    { question: "¿Qué haces si necesitas mejorar una habilidad para tu puesto?", answers: ["Tomo cursos", "Ignoro la necesidad", "Busco ayuda", "Cambio de puesto"], correctAnswer: 0 },
    { question: "¿Qué harías si un compañero no colabora en un proyecto grupal?", answers: ["Lo hablo con él", "Lo ignoro", "Lo reporto al jefe", "Hago su parte"], correctAnswer: 0 },
    { question: "¿Cómo gestionas tus emociones en situaciones de alta presión?", answers: ["Respiro y me calmo", "Reprimo mis emociones", "Dejo que me afecte", "Lo hablo con otros"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la honestidad en tus relaciones laborales?", answers: ["Muy importante", "Poco importante", "Moderadamente importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas si tienes un problema personal que afecta tu trabajo?", answers: ["Busco ayuda", "Ignoro el problema", "Trabajo menos", "Lo comparto con mi equipo"], correctAnswer: 0 },
    { question: "¿Qué haces si un superior te pide hacer algo que consideras éticamente incorrecto?", answers: ["Expreso mis preocupaciones", "Sigo órdenes", "Lo ignoro", "Lo discuto con colegas"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti un ambiente de trabajo seguro y respetuoso?", answers: ["Muy importante", "Poco importante", "Moderadamente importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué prefieres en el trabajo: autonomía o supervisión cercana?", answers: ["Autonomía", "Supervisión cercana", "Ambos", "Ninguno"], correctAnswer: 0 },
    { question: "¿Qué harías si tienes un desacuerdo con tu jefe?", answers: ["Hablo de manera respetuosa", "Lo ignoro", "Busco apoyo de otros", "Hago lo que él/ella dice"], correctAnswer: 0 },
    { question: "¿Qué importancia tiene para ti la justicia en el lugar de trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo te sientes al asumir responsabilidades adicionales?", answers: ["Me motiva", "Me estresa", "Lo hago con dificultad", "Lo evito"], correctAnswer: 0 },
    { question: "¿Qué haces si descubres que alguien está incumpliendo las normas éticas?", answers: ["Lo informo", "Lo ignoro", "Le advierto", "Lo enfrento"], correctAnswer: 0 },
    { question: "¿Qué opinas de la importancia de la formación continua en el trabajo?", answers: ["Muy importante", "Poco importante", "Moderadamente importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si tuvieras que enfrentar una decisión difícil en el trabajo?", answers: ["Reflexiono y evalúo opciones", "Tomo la decisión rápidamente", "Pido ayuda", "La evito"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas si un compañero de trabajo te critica en público?", answers: ["Mantengo la calma y hablo después", "Lo confronto", "Lo ignoro", "Le devuelvo la crítica"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti la responsabilidad social de la empresa?", answers: ["Muy importante", "Poco importante", "Moderadamente importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si tienes una idea innovadora para mejorar el trabajo?", answers: ["La propongo", "La guardo", "La comparto con colegas", "La aplico sin permiso"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti el respeto entre colegas?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si tu trabajo se ve afectado por un problema personal?", answers: ["Pido un tiempo para resolverlo", "Ignoro el problema", "Busco apoyo en el trabajo", "Dejo que me afecte"], correctAnswer: 0 },
    { question: "¿Cómo defines un ambiente laboral positivo?", answers: ["Respeto y colaboración", "Alta competencia", "Poca supervisión", "Orientado a resultados"], correctAnswer: 0 },
    { question: "¿Qué harías si un proyecto en el que trabajas fracasa?", answers: ["Analizo los errores", "Busco culpables", "Lo olvido", "Me siento mal sin actuar"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti recibir retroalimentación constructiva?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si necesitas mejorar una habilidad específica para tu puesto?", answers: ["Busco formación", "Ignoro la necesidad", "Delego el trabajo", "Cambio de puesto"], correctAnswer: 0 },
    { question: "¿Qué opinas sobre trabajar bajo presión?", answers: ["Me motiva", "Me estresa", "No afecta mi rendimiento", "Depende de la situación"], correctAnswer: 0 },
    { question: "¿Qué haces si observas una injusticia en el trabajo?", answers: ["Lo informo", "Lo ignoro", "Busco ayuda", "Habla con los involucrados"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti la flexibilidad laboral?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo enfrentas un problema inesperado en el trabajo?", answers: ["Analizo y busco soluciones", "Me estreso", "Lo ignoro", "Lo delego"], correctAnswer: 0 },
    { question: "¿Qué haces si descubres que alguien no está siendo honesto en el trabajo?", answers: ["Habla con la persona", "Lo ignoro", "Lo informo a un superior", "Le doy otra oportunidad"], correctAnswer: 0 },
    { question: "¿Qué importancia tiene la confianza en el trabajo para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas si un proyecto requiere más esfuerzo del que esperabas?", answers: ["Me esfuerzo más", "Busco ayuda", "Delego tareas", "Lo abandono"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la puntualidad en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si recibes un comentario negativo sobre tu desempeño?", answers: ["Lo tomo como aprendizaje", "Lo ignoro", "Me desanimo", "Busco excusas"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti tener metas claras en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo manejas la competencia entre colegas?", answers: ["Me enfoco en mejorar", "Compito agresivamente", "Ignoro la competencia", "Busco trabajar juntos"], correctAnswer: 0 },
    { question: "¿Qué harías si descubres que otro departamento tiene mejores resultados?", answers: ["Analizo qué hacen bien", "Me siento celoso", "Ignoro la situación", "Busco trabajar con ellos"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti la coherencia en las decisiones de la empresa?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si necesitas apoyo en una tarea?", answers: ["Lo pido", "Me esfuerzo solo", "Evito hacer la tarea", "Delego"], correctAnswer: 0 },
    { question: "¿Cómo te sientes al delegar tareas a otros?", answers: ["Me gusta colaborar", "Prefiero hacer todo yo", "Desconfío", "No me afecta"], correctAnswer: 0 },
    { question: "¿Qué importancia tiene para ti la confidencialidad en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si necesitas tomar una decisión rápida en el trabajo?", answers: ["Analizo y actúo", "Dudo mucho", "Lo consulto con otros", "Evito decidir"], correctAnswer: 0 },
    { question: "¿Qué harías si observas que una práctica en la empresa no es ética?", answers: ["Lo reporto", "Lo ignoro", "Lo comento con colegas", "Me adapto"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti el reconocimiento en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo te sientes cuando recibes críticas de tu jefe?", answers: ["Lo tomo de forma constructiva", "Me siento afectado", "Lo ignoro", "Me desmotivo"], correctAnswer: 0 },
    { question: "¿Qué haces si te asignan una tarea fuera de tu experiencia?", answers: ["Aprendo lo necesario", "Me quejo", "La delego", "La rechazo"], correctAnswer: 0 },
    { question: "¿Cómo manejas el estrés cuando tienes múltiples tareas pendientes?", answers: ["Organizo mi tiempo", "Lo ignoro", "Me estreso mucho", "Delego algunas tareas"], correctAnswer: 0 },
    { question: "¿Qué importancia tiene la comunicación efectiva en el trabajo para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si te das cuenta de un error en un proyecto entregado?", answers: ["Informo a mi jefe", "Espero a que alguien lo note", "Lo ignoro", "Intento solucionarlo sin avisar"], correctAnswer: 0 },
    { question: "¿Cómo enfrentas las críticas negativas de tus compañeros?", answers: ["Lo tomo de forma constructiva", "Me siento ofendido", "Las ignoro", "Me defiendo"], correctAnswer: 0 },
    { question: "¿Qué harías si un colega toma crédito por tu trabajo?", answers: ["Hablo con él", "Lo informo a un superior", "Lo dejo pasar", "Intento obtener reconocimiento en privado"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti la transparencia en la empresa?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si no estás de acuerdo con una decisión de tu equipo?", answers: ["Expreso mi opinión", "La acepto sin cuestionar", "La ignoro", "Busco apoyo de otros"], correctAnswer: 0 },
    { question: "¿Cómo equilibras tu vida personal y laboral?", answers: ["Organizo mis horarios", "Dedico más tiempo al trabajo", "Me desconecto después de trabajar", "No lo hago"], correctAnswer: 0 },
    { question: "¿Qué importancia tiene para ti la empatía en el lugar de trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si recibes una tarea que consideras fuera de tu responsabilidad?", answers: ["Lo hago de todas formas", "Hablo con mi jefe", "La rechazo", "Intento delegarla"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la confianza en la relación con tus superiores?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas ante cambios repentinos en el trabajo?", answers: ["Me adapto rápidamente", "Me estreso", "Resisto al cambio", "Lo tomo con calma"], correctAnswer: 0 },
    { question: "¿Qué haces si tienes una carga de trabajo excesiva?", answers: ["Pido ayuda", "La asumo sin quejarme", "Intento delegar", "Lo hablo con mi jefe"], correctAnswer: 0 },
    { question: "¿Qué tan importante es el crecimiento profesional en tu vida laboral?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si observas un trato injusto hacia un colega?", answers: ["Lo reporto", "Lo ignoro", "Habla con el colega", "Lo comento con otros"], correctAnswer: 0 },
    { question: "¿Qué importancia tiene para ti recibir una retroalimentación honesta?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo te sientes cuando otros dependen de ti para completar su trabajo?", answers: ["Me siento motivado", "Me estreso", "Me siento indiferente", "Prefiero que no lo hagan"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti tener un propósito en el trabajo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si te sientes agotado mentalmente en el trabajo?", answers: ["Tomo un descanso", "Continúo sin parar", "Pido días libres", "Cambio de actividad"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la seguridad laboral para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas cuando otro equipo tiene mejores resultados?", answers: ["Me motivo a mejorar", "Siento envidia", "Ignoro la situación", "Busco aprender de ellos"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la cultura de la empresa para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si tu jefe te pide hacer algo que no estás seguro de cómo hacer?", answers: ["Pido aclaración", "Lo intento de todas formas", "Lo delego", "Lo hago a mi manera"], correctAnswer: 0 },
    { question: "¿Qué harías si descubres que tu colega no ha cumplido con su parte del trabajo?", answers: ["Lo hablo con él", "Lo informo al jefe", "Lo hago yo mismo", "Lo ignoro"], correctAnswer: 0 },
    { question: "¿Qué haces si necesitas más tiempo para una tarea asignada?", answers: ["Solicito una extensión", "Trabajo más rápido", "Pido ayuda", "La entrego incompleta"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la proactividad en el trabajo para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo te sientes al tener que liderar a tus colegas?", answers: ["Motivado", "Estresado", "Indiferente", "Evitativo"], correctAnswer: 0 },
    { question: "¿Qué haces si sientes que no estás cumpliendo con tus propias expectativas?", answers: ["Me esfuerzo más", "Me doy tiempo", "Lo ignoro", "Lo hablo con alguien"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la innovación en tu vida laboral?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si tienes la oportunidad de liderar un nuevo proyecto?", answers: ["Acepto con gusto", "Rechazo la oferta", "Lo pienso mucho", "Lo hago con dudas"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti tener un equipo colaborativo?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas si recibes menos reconocimiento del que esperabas?", answers: ["Lo acepto", "Me desmotivo", "Me quejo", "Intento destacarme más"], correctAnswer: 0 },
    { question: "¿Qué tan importante es para ti la ética profesional?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué haces si tienes ideas para mejorar tu equipo?", answers: ["Las comparto", "Las guardo", "Las aplico yo mismo", "Espero el momento adecuado"], correctAnswer: 0 },
    { question: "¿Cómo te sientes cuando trabajas en un ambiente competitivo?", answers: ["Motivado", "Estresado", "Indiferente", "Mejor evito la competencia"], correctAnswer: 0 },
    { question: "¿Qué tan importante es la claridad en las metas laborales para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 },
    { question: "¿Qué harías si descubres una oportunidad de mejorar el trabajo de tu equipo?", answers: ["La propongo", "La aplico solo", "La comento con un superior", "Espero a que alguien más la note"], correctAnswer: 0 },
    { question: "¿Cómo reaccionas si un compañero recibe un ascenso en lugar de ti?", answers: ["Felicito y aprendo", "Me siento desmotivado", "Me quejo con el jefe", "Lo ignoro"], correctAnswer: 0 },
    { question: "¿Qué tan importante es el respeto hacia los superiores para ti?", answers: ["Muy importante", "Moderadamente importante", "Poco importante", "Nada importante"], correctAnswer: 0 }

 ];


        function shuffleQuestions(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        document.getElementById("start-quiz").addEventListener("click", () => {
            shuffleQuestions(questions);
            document.getElementById("welcome-container").style.display = "none";
            document.getElementById("quiz-container").style.display = "block";
            showQuestion();
        });

        let currentQuestionIndex = 0;
        let score = 0;
        let userResponses = [];

        function showQuestion() {
            document.getElementById("loading").style.display = "block";
            setTimeout(() => {
                document.getElementById("loading").style.display = "none";
                const currentQuestion = questions[currentQuestionIndex];
                document.getElementById("question").textContent = currentQuestion.question;
                const answersElement = document.getElementById("answers");
                answersElement.innerHTML = "";
                currentQuestion.answers.forEach((answer, index) => {
                    const button = document.createElement("button");
                    button.textContent = answer;
                    button.onclick = () => selectAnswer(index);
                    answersElement.appendChild(button);
                });
            }, 1000);
        }

        function selectAnswer(selectedAnswer) {
            const currentQuestion = questions[currentQuestionIndex];
            userResponses.push({
                question: currentQuestion.question,
                selectedAnswer: currentQuestion.answers[selectedAnswer],
                correctAnswer: currentQuestion.answers[currentQuestion.correctAnswer]
            });

            if (selectedAnswer === currentQuestion.correctAnswer) {
                score++;
            }
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        async function showResults() {
            document.getElementById("quiz-container").style.display = "none";
            document.getElementById("result-container").style.display = "block";

            const totalQuestions = questions.length;
            const resultMessage = document.getElementById("result-message");
            const percentage = Math.floor((score / totalQuestions) * 100);
            resultMessage.textContent = `¡Has completado la evaluación! Tu puntaje es ${score}/${totalQuestions}.`;

            const userName = sessionStorage.getItem("userName") || "Usuario desconocido"; 
            const token = sessionStorage.getItem("token");

            try {
                await addDoc(collection(db, "results"), {
                    userName,
                    token,
                    score,
                    percentage,
                    totalQuestions,
                    responses: userResponses
                });
            } catch (error) {
                console.error("Error al guardar el resultado: ", error);
            }
        }

        document.getElementById("ok-button").addEventListener("click", () => {
            sessionStorage.removeItem("token");
            document.getElementById("result-container").style.display = "none";
            document.getElementById("login-container").style.display = "block";
            document.getElementById("email").value = "";
            document.getElementById("token").value = "";
        });
    </script>
</body>
</html>
